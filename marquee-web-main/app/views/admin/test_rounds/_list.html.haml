.page-header
  %h2 Listing Test Rounds
  -# if can? :create, TestRound, {:project_id => project.id} and (@current_user.role?(:admin) or @current_user.role?(:qa_manager))
    =# link_to 'Schedule', new_admin_project_test_round_path(project), :class => 'btn primary'
  = form_for search, :url => admin_project_test_rounds_path, :remote => true do |f|
    %span.search
      = f.text_field :test_suite_test_type_name_or_test_environment_name_or_test_suite_name_or_test_object_contains, {:id => 'search'}
      = f.submit '', {:class => 'btn', :id => 'searchsubmit'}
.test-rounds
  %table.zebra-striped
    %tr
      %th ID
      %th Test Type
      %th Test Environment
      %th Test Suite
      %th Test Object
      %th
    - if test_rounds.nil? or test_rounds.count == 0
      %tr
        %td{:colspan => "5"}
          %h4 No data
    - else
      - test_rounds.each do |test_round|
        %tr
          %td= test_round.id
          %td= test_round.test_suite.test_type.name
          %td= test_round.test_environment.name
          %td= test_round.test_suite.name
          %td= test_round.test_object
          - show_url, edit_url, delete_url = nil
          - if can? :update, Project, {:project_id => project.id}
            - edit_url = edit_admin_project_test_round_path(project, test_round)
          - if can? :delete, Project, {:project_id => project.id}
            - delete_url = admin_project_test_round_path(project, test_round)          
          = render :partial => 'partial/table_actions', :locals => {:show_url => show_url, :edit_url => edit_url, :delete_url => delete_url}

= paginate test_rounds

= link_to 'Back', admin_project_path(project), :class => 'btn'
